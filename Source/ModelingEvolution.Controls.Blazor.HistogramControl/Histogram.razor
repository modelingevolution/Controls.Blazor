@using ModelingEvolution.Drawing
<SvgCanvas Class="@Class" Width="@Width" Height="@Height" 
           ViewBox="ViewBox.Create(0,0,Width,255)" DisablePreserveAspectRatio="false"
           OnMouseDown="OnMouseDown" OnMouseUp="OnMouseUp">
    <CascadingValue Value="@_vm">
        @ChildContent
    </CascadingValue>
</SvgCanvas>

@code
{
    [Parameter]
    public string Class { get; set; }

    [Parameter] public double Width { get; set; } = 510;

    [Parameter] public double Height { get; set; } = 255;

    [Parameter]
    public RenderFragment ChildContent { get; set; }

    

    private HistogramVm _vm = new HistogramVm();

    protected override void OnParametersSet()
    {
        _vm.Width = Width;
        _vm.Height = Height;
    }

    private Task OnMouseDown(CanvasMouseEventArgs arg)
    {
        _vm.Add(arg.Location);
        return Task.CompletedTask;
    }

    private Task OnMouseUp(CanvasMouseEventArgs arg)
    {
        return _vm.OnMouseUp();
    }
}
